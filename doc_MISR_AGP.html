<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
   <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>Documentation for the IDL routines in project MISR_AGP</title>
   </head>
<body>
<h1>Documentation for the IDL routines in project MISR_AGP</h1>
<h2>find_agp_file</h2>
<ul>
<li><p><strong>Purpose:</strong> This function provides the file specification (path + name) of the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file corresponding to the given <code>misr_path</code> and optional <code>agp_version</code>, if it is available either in the default folder (defined by the function <code>set_roots_vers.pro</code>), or in the folder specified by the optional input keyword parameter <code>agp_folder</code>.</p></li>
<li><p><strong>Algorithm:</strong> This function searches the folder <code>root_dirs[0]</code>, or the folder specified by the optional input keyword parameter <code>agp_folder</code>, if provided, for the <span class="smallcaps">AGP</span> file corresponding to the input positional parameter <code>misr_path</code> and the optionally specified version, and provides the full file specification (path and name) of that file if it is found, through the output positional argument <code>agp_fspec</code>.</p></li>
<li><p><strong>Syntax:</strong> <code>rc = find_agp_file(misr_path, agp_fspec, $</code><br />
<code>AGP_FOLDER = agp_folder, AGP_VERSION = agp_version, $</code><br />
<code>DEBUG = debug, EXCPT_COND = excpt_cond)</code></p></li>
<li><p><strong>Positional parameters [Input/Output]:</strong></p>
<ul>
<li><p><code>misr_path {INT} [I]:</code> The selected <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> number.</p></li>
<li><p><code>agp_fspec {STRING} [O]:</code> The file specification of the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file for the selected <span class="smallcaps">Path</span>.</p></li>
</ul></li>
<li><p><strong>Keyword parameters [Input/Output]:</strong></p>
<ul>
<li><p><code>AGP_FOLDER = agp_folder {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The directory address of the folder containing the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> files, if they are not located in the default location.</p></li>
<li><p><code>AGP_VERSION = agp_version {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The <span class="smallcaps">AGP</span> version identifier to use instead of the default value.</p></li>
<li><p><code>DEBUG = debug {INT} [I] (Default value: 0):</code> Flag to activate (<code>1</code>) or skip (<code>0</code>) debugging tests.</p></li>
<li><p><code>EXCPT_COND = excpt_cond {STRING} [O] (Default value: &#8221;):</code> Description of the exception condition if one has been encountered, or a null string otherwise.</p></li>
</ul></li>
<li><p><strong>Returned value type:</strong> <code>INT</code>.</p></li>
<li><p><strong>Outcome:</strong></p>
<ul>
<li><p>If no exception condition has been detected, this function returns <code>0</code>, and the output keyword parameter <code>excpt_cond</code> is set to a null string, if the optional input keyword parameter <code>DEBUG</code> was set and if the optional output keyword parameter <code>EXCPT_COND</code> was provided in the call. The output positional parameter <code>agp_fspec</code> contains the full specification of the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file.</p></li>
<li><p>If an exception condition has been detected, this function returns a non-zero error code, and the output keyword parameter <code>excpt_cond</code> contains a message about the exception condition encountered, if the optional input keyword parameter <code>DEBUG</code> is set and if the optional output keyword parameter <code>EXCPT_COND</code> is provided. The output positional parameter <code>agp_fspec</code> may be inexistent, incomplete or incorrect.</p></li>
</ul></li>
<li><p><strong>Exception conditions:</strong></p>
<ul>
<li><p>Error 100: One or more positional parameter(s) are missing.</p></li>
<li><p>Error 110: Input argument <code>misr_path</code> is invalid.</p></li>
<li><p>Error 199: An exception condition occurred in function <code>set_roots_vers</code>.</p></li>
<li><p>Error 200: An exception condition occurred in function <code>path2str.pro</code>.</p></li>
<li><p>Error 210: This computer is unrecognized and no alternate directory address to the <span class="smallcaps">AGP</span> folder is provided.</p></li>
<li><p>Error 300: No <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file has been found.</p></li>
<li><p>Error 310: More than 1 <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file has been found.</p></li>
<li><p>Error 320: The <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file exists but is unreadable.</p></li>
<li><p>Error 330: An exception condition occurred in function <code>is_readable.pro</code>.</p></li>
<li><p>Error 340: The <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file does not exist.</p></li>
<li><p>Error 600: An exception condition occurred in the <span class="smallcaps">MISR</span> <span class="smallcaps">Toolkit</span> routine<br />
<code>MTK_MAKE_FILENAME</code>.</p></li>
</ul></li>
<li><p><strong>Dependencies:</strong></p>
<ul>
<li><p><code>MISR Toolkit</code></p></li>
<li><p><code>chk_misr_path.pro</code></p></li>
<li><p><code>is_readable.pro</code></p></li>
<li><p><code>path2str.pro</code></p></li>
<li><p><code>set_roots_vers.pro</code></p></li>
<li><p><code>strstr.pro</code></p></li>
</ul></li>
<li><p><strong>Remarks:</strong> None.</p></li>
<li><p><strong>Examples:</strong></p>
<pre><code>IDL&gt; misr_path = 168
IDL&gt; rc = find_agp_file(misr_path, agp_fspec, $
   AGP_FOLDER = &#39;&#39;, AGP_VERSION = agp_version, $
   /DEBUG, EXCPT_COND = excpt_cond)
IDL&gt; PRINT, &#39;rc = &#39; + strstr(rc) + &#39;, $
   excpt_cond = &gt;&#39; + excpt_cond + &#39;&lt;&#39;
rc = 0, excpt_cond = &gt;&lt;
IDL&gt; PRINT, &#39;agp_fspec = &#39; + agp_fspec
agp_fspec =
   /Users/michel/MISR_HR/Input/AGP/MISR_AM1_AGP_P168_F01_24.hdf</code></pre></li>
<li><p><strong>References:</strong> None.</p></li>
<li><p><strong>Versioning:</strong></p>
<ul>
<li><p>2018&#8211;02&#8211;12: Version 1.0 &#8212; Initial release.</p></li>
<li><p>2018&#8211;03&#8211;26: Version 1.1 &#8212; Initial public release.</p></li>
<li><p>2018&#8211;04&#8211;08: Version 1.2 &#8212; Update this function to use <code>set_root_dirs.pro</code> instead of <code>set_misr_roots.pro</code>.</p></li>
<li><p>2018&#8211;05&#8211;16: Version 1.5 &#8212; Implement new coding standards.</p></li>
<li><p>2018&#8211;12&#8211;15: Version 1.6 &#8212; Add the optional input keyword parameter <code>AGP_FOLDER</code>.</p></li>
<li><p>2019&#8211;01&#8211;28: Version 2.00 &#8212; Systematic update of all routines to implement stricter coding standards and improve documentation.</p></li>
<li><p>2019&#8211;02&#8211;24: Version 2.01 &#8212; Documentation update.</p></li>
<li><p>2019&#8211;05&#8211;04: Version 2.02 &#8212; Update the code to report the specific error message of MTK routines.</p></li>
</ul></li>
</ul>
<h2>mk_agp_lc_masks</h2>
<ul>
<li><p><strong>Purpose:</strong> This function sets the output positional parameter <code>landcover</code> to a single 2D array containing the land cover classification (7 classes) based on the information available in the <span class="smallcaps">AGP</span> file for the specified <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> and <span class="smallcaps">Block</span>, and the output positional parameter <code>agp_masks</code> to an array of 7 landcover masks, one per defined class.</p></li>
<li><p><strong>Algorithm:</strong> This function retrieves the basic landcover classification for the specified <span class="smallcaps">Path</span> and <span class="smallcaps">Block</span> from the relevant <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file and generates 7 individual binary masks, one for each recognized class, at the specified spatial resolution (either 275 or 1100 m), as well as an overall array containing all classes.<br />
Within each individual land cover class mask, each pixel is assigned the value <code>0B</code> if that location does not belong to that class, or <code>1B</code> if it does. A log file is generated if the optional keyword parameter <code>LOG_IT</code> is specified, and each of the 8 masks is also saved as a map if the optional keyword parameter <code>MAP_IT</code> is set. In that case, the land cover classes are assigned the following colors:</p>
<ul>
<li><p><code>landcover code 0:</code> Shallow ocean, blue.</p></li>
<li><p><code>landcover code 1:</code> Land, green.</p></li>
<li><p><code>landcover code 2:</code> Coastline, tan.</p></li>
<li><p><code>landcover code 3:</code> Shallow inland water, cyan.</p></li>
<li><p><code>landcover code 4:</code> Ephemeral water, turquoise.</p></li>
<li><p><code>landcover code 5:</code> Deep inland water, purple.</p></li>
<li><p><code>landcover code 6:</code> Deep ocean, navy.</p></li>
</ul>
<p>The masks are generated at the original low spatial resolution (1100 m) of the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file, and upscaled to the higher spatial resolution (275 m) if requested, using the function <code>lr2hr.pro</code>.</p></li>
<li><p><strong>Syntax:</strong> <code>rc = mk_agp_lc_masks(misr_path, misr_block, misr_resol, $</code><br />
<code>landcover, agp_masks, $</code><br />
<code>AGP_FOLDER = agp_folder, AGP_VERSION = agp_version, $</code><br />
<code>LOG_IT = log_it, LOG_FOLDER = log_folder, $</code><br />
<code>MAP_IT = map_it, MAP_FOLDER = map_folder$</code><br />
<code>DEBUG = debug, EXCPT_COND = excpt_cond)</code></p></li>
<li><p><strong>Positional parameters [Input/Output]:</strong></p>
<ul>
<li><p><code>misr_path {INT} [I]:</code> The specified <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> number.</p></li>
<li><p><code>misr_block {INT} [I]:</code> The specified initial <span class="smallcaps">MISR</span> <span class="smallcaps">Block</span> number.</p></li>
<li><p><code>misr_resol {INT} [I]:</code> The required spatial resolution of the output mask: either 275 or 1100 (in m).</p></li>
<li><p><code>landcover {BYTE array} [O]:</code> The landcover information contained in the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file for the specified <span class="smallcaps">Path</span> and <span class="smallcaps">Block</span>.</p></li>
<li><p><code>agp_masks {BYTE array} [O]:</code> The array of 7 binary masks, one per landcover class, for the specified <span class="smallcaps">Path</span> and <span class="smallcaps">Block</span>.</p></li>
</ul></li>
<li><p><strong>Keyword parameters [Input/Output]:</strong></p>
<ul>
<li><p><code>AGP_FOLDER = agp_folder {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The directory address of the folder containing the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> files, if they are not located in the default location.</p></li>
<li><p><code>AGP_VERSION = agp_version {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The <span class="smallcaps">AGP</span> version identifier to use instead of the default value.</p></li>
<li><p><code>LOG_IT = log_it {INT} [I] (Default value: 0):</code> Flag to activate (<code>1</code>) or skip (<code>0</code>) generating a log file.</p></li>
<li><p><code>LOG_FOLDER = log_folder {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The directory address of the output folder containing the processing log.</p></li>
<li><p><code>MAP_IT = map_it {INT} [I] (Default value: 0):</code> Flag to activate (<code>1</code>) or skip (<code>0</code>) generating maps of the numerical results.</p></li>
<li><p><code>MAP_FOLDER = map_folder {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The directory address of the output folder containing the maps.</p></li>
<li><p><code>DEBUG = debug {INT} [I] (Default value: 0):</code> Flag to activate (<code>1</code>) or skip (<code>0</code>) debugging tests.</p></li>
<li><p><code>EXCPT_COND = excpt_cond {STRING} [O] (Default value: &#8221;):</code> Description of the exception condition if one has been encountered, or a null string otherwise.</p></li>
</ul></li>
<li><p><strong>Returned value type:</strong> <code>INT</code>.</p></li>
<li><p><strong>Outcome:</strong></p>
<ul>
<li><p>If no exception condition has been detected, this function returns <code>0</code>, and the output keyword parameter <code>excpt_cond</code> is set to a null string, if the optional input keyword parameter <code>DEBUG</code> is set and if the optional output keyword parameter <code>EXCPT_COND</code> is provided in the call. The landcover and the array of binary masks are returned as output positional parameter; a log file is created and saved if the input keyword parameter <code>LOG_IT</code> is set, and maps of the landcover and of these masks are generated and saved if the input keyword parameter <code>MAP_IT</code> is set in the call.</p></li>
<li><p>If an exception condition has been detected, this function returns a non-zero error code, and the output keyword parameter <code>excpt_cond</code> contains a message about the exception condition encountered, if the optional input keyword parameter <code>DEBUG</code> is set and if the optional output keyword parameter <code>EXCPT_COND</code> is provided in the call. The landcover and the array of binary masks may be inexistent, incomplete or incorrect.</p></li>
</ul></li>
<li><p><strong>Exception conditions:</strong></p>
<ul>
<li><p>Warning 98: The computer has not been recognized by the function<br />
<code>get_host_info.pro</code>.</p></li>
<li><p>Error 100: One or more positional parameter(s) are missing.</p></li>
<li><p>Error 110: The input positional parameter <code>misr_path</code> is invalid.</p></li>
<li><p>Error 120: The input positional parameters <code>misr_block</code> is invalid.</p></li>
<li><p>Error 130: The input positional parameters <code>misr_resol</code> is invalid.</p></li>
<li><p>Error 199: An exception condition occurred in <code>set_roots_vers.pro</code>.</p></li>
<li><p>Error 200: An exception condition occurred in <code>path2str.pro</code>.</p></li>
<li><p>Error 210: An exception condition occurred in <code>block2str.pro</code>.</p></li>
<li><p>Error 220: An exception condition occurred in <code>find_agp_file.pro</code>.</p></li>
<li><p>Error 299: The function <code>set_roots_vers.pro</code> could not assign values to the array <code>root_dirs</code> and one or more directory addresses <code>agp_folder</code>, <code>log_folder</code> and <code>map_folder</code> have not been specified through input keyword parameters.</p></li>
<li><p>Error 400: An exception condition occurred in <code>lr2hr.pro</code>.</p></li>
<li><p>Error 410: An exception condition occurred in <code>make_bytemap.pro</code> while generating the overall map (all classes).</p></li>
<li><p>Error 420: An exception condition occurred in <code>make_bytemap.pro</code> while generating the Shallow ocean map.</p></li>
<li><p>Error 430: An exception condition occurred in <code>make_bytemap.pro</code> while generating the Landcover map.</p></li>
<li><p>Error 440: An exception condition occurred in <code>make_bytemap.pro</code> while generating the Coastline map.</p></li>
<li><p>Error 450: An exception condition occurred in <code>make_bytemap.pro</code> while generating the Shallow inland water map.</p></li>
<li><p>Error 460: An exception condition occurred in <code>make_bytemap.pro</code> while generating the Ephemeral water map.</p></li>
<li><p>Error 470: An exception condition occurred in <code>make_bytemap.pro</code> while generating the Deep inland water map.</p></li>
<li><p>Error 480: An exception condition occurred in <code>make_bytemap.pro</code> while generating the Deep ocean map.</p></li>
<li><p>Error 500: The directory address of <code>log_folder</code> is unwritable.</p></li>
<li><p>Error 510: An exception condition occurred in <code>is_writable.pro</code>.</p></li>
<li><p>Error 520: The directory address of <code>map_fpath</code> is unwritable.</p></li>
<li><p>Error 530: An exception condition occurred in <code>is_writable.pro</code>.</p></li>
<li><p>Error 600: An exception condition occurred in the <span class="smallcaps">MISR</span> <span class="smallcaps">Toolkit</span> routine<br />
<code>MTK_SETREGION_BY_PATH_BLOCKRANGE</code>.</p></li>
<li><p>Error 610: An exception condition occurred in the <span class="smallcaps">MISR</span> <span class="smallcaps">Toolkit</span> routine<br />
<code>MTK_READDATA</code>.</p></li>
</ul></li>
<li><p><strong>Dependencies:</strong></p>
<ul>
<li><p><code>MISR Toolkit</code></p></li>
<li><p><code>block2str.pro</code></p></li>
<li><p><code>chk_misr_block.pro</code></p></li>
<li><p><code>chk_misr_path.pro</code></p></li>
<li><p><code>chk_misr_resol.pro</code></p></li>
<li><p><code>get_agp_file.pro</code></p></li>
<li><p><code>is_writable.pro</code></p></li>
<li><p><code>lr2hr.pro</code></p></li>
<li><p><code>make_bytemap.pro</code></p></li>
<li><p><code>path2str.pro</code></p></li>
<li><p><code>set_roots_vers.pro</code></p></li>
<li><p><code>strstr.pro</code></p></li>
<li><p><code>today.pro</code></p></li>
</ul></li>
<li><p><strong>Remarks:</strong></p>
<ul>
<li><p><strong>Note 1:</strong> Land cover information is provided by the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file everywhere: there is no concept of fill values in this context.</p></li>
<li><p><strong>Note 2:</strong> Setting the <code>misr_resol</code> input positional parameter to 275 generates a set of &#8216;high-resolution&#8217; land cover masks by duplicating the low-resolution information contained in the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> file: it does not provide more detailed information than what is available in that source file.</p></li>
</ul></li>
<li><p><strong>Examples:</strong></p>
<pre><code>IDL&gt; misr_path = 168
IDL&gt; misr_block = 112
IDL&gt; misr_resol = 1100
IDL&gt; AGP_FOLDER = &#39;&#39;
IDL&gt; AGP_VERSION = &#39;&#39;
IDL&gt; LOG_IT = 1
IDL&gt; LOG_FOLDER = &#39;&#39;
IDL&gt; MAP_IT = 1
IDL&gt; MAP_FOLDER = &#39;&#39;
IDL&gt; DEBUG = 1
IDL&gt; c = mk_agp_lc_masks(misr_path, misr_block, misr_resol, $
   landcover, agp_masks, $
   AGP_FOLDER = agp_folder, AGP_VERSION = agp_version, $
   LOG_IT = log_it, LOG_FOLDER = log_folder, $
   MAP_IT = map_it, MAP_FOLDER = map_folder, $
   DEBUG = debug, EXCPT_COND = excpt_cond)
IDL&gt; rc = mk_agp_lc_masks(misr_path, misr_block, misr_resol, $
   landcover, agp_masks, $
   AGP_FOLDER = agp_folder, AGP_VERSION = agp_version, $
   LOG_IT = log_it, LOG_FOLDER = log_folder, $
   MAP_IT = map_it, MAP_FOLDER = map_folder, $
   DEBUG = debug, EXCPT_COND = excpt_cond)
IDL&gt; IF (rc EQ 0) THEN PRINT, &#39;Processing nominal.&#39; $
   ELSE PRINT, &#39;excpt_cond = &gt;&#39; + excpt_cond + &#39;&lt;&#39;
Processing nominal.</code></pre></li>
<li><p><strong>References:</strong></p>
<ul>
<li><p>Mike Bull, Jason Matthews, Duncan McDonald, Alexander Menzies, Catherine Moroney, Kevin Mueller, Susan Paradise, Mike Smyth (2011) <em>MISR Data Products Specifications</em>, <strong>JPL D-13963</strong>, <strong>Revision S</strong>, Section 9.4, p. 210, Jet Propulsion Laboratory, California Institute of Technology, Pasadena, CA, USA.</p></li>
</ul></li>
<li><p><strong>Versioning:</strong></p>
<ul>
<li><p>2018&#8211;05&#8211;13: Version 0.9 &#8212; Initial release, under the name <code>make_agp_lc_masks.pro</code>.</p></li>
<li><p>2018&#8211;05&#8211;15: Version 1.0 &#8212; Initial public release.</p></li>
<li><p>2018&#8211;05&#8211;18: Version 1.5 &#8212; Implement new coding standards.</p></li>
<li><p>2018&#8211;08&#8211;02: Version 1.6 &#8212; Update documentation.</p></li>
<li><p>2018&#8211;12&#8211;17: Version 1.7 &#8212; Update the code to use <code>set_roots_vers.pro</code> and<br />
<code>make_bytemap.pro</code>.</p></li>
<li><p>2019&#8211;01&#8211;07: Version 1.8 &#8212; Rename this function from <code>make_agp_lc_masks.pro</code> to <code>mk_agp_lc_masks.pro</code> and update the documentation.</p></li>
<li><p>2019&#8211;01&#8211;28: Version 2.00 &#8212; Systematic update of all routines to implement stricter coding standards and improve documentation.</p></li>
<li><p>2019&#8211;02&#8211;24: Version 2.01 &#8212; Documentation update.</p></li>
<li><p>2019&#8211;05&#8211;04: Version 2.02 &#8212; Update the code to report the specific error message of MTK routines.</p></li>
</ul></li>
</ul>
<h2>mk_water_land_masks</h2>
<ul>
<li><p><strong>Purpose:</strong> This function generates two simplified landcover maps for the specified <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> and <span class="smallcaps">Block</span>, one for water bodies and one for land masses.</p></li>
<li><p><strong>Algorithm:</strong> This function relies on the function <code>mk_agp_lc_masks.pro</code> to provide masks for the 7 standard <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> surface cover types for the specified <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> and then combines the 3 categories (&#8216;0: shallow ocean&#8217;, &#8216;5: deep inland water&#8217; and &#8216;6: deep ocean&#8217;) into the water bodies mask, and the other 4 categories (&#8216;1: land&#8217;, &#8216;2: coastline&#8217;, &#8216;3: shallow inland water&#8217; and &#8216;4: ephemeral water&#8217;) into the land masses mask.</p></li>
<li><p><strong>Syntax:</strong> <code>rc = mk_water_land_masks(misr_path, misr_block, misr_resol, $</code><br />
<code>water_mask, land_mask, $</code><br />
<code>AGP_FOLDER = agp_folder, AGP_VERSION = agp_version, $</code><br />
<code>DEBUG = debug, EXCPT_COND = excpt_cond)</code></p></li>
<li><p><strong>Positional parameters [Input/Output]:</strong></p>
<ul>
<li><p><code>misr_path {INT} [I]:</code> The selected <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> number.</p></li>
<li><p><code>misr_block {INT} [I]:</code> The selected <span class="smallcaps">MISR</span> <span class="smallcaps">Block</span> number.</p></li>
<li><p><code>misr_resol {INT} [I]:</code> The spatial resolution at which the output land and water masks are required (either 275 or 1100 m).</p></li>
<li><p><code>water_mask {BYTE array} [O]:</code> The water mask for the specified <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> and <span class="smallcaps">Block</span>, at the requested spatial resolution.</p></li>
<li><p><code>land_mask {BYTE array} [O]:</code> The land mask for the specified <span class="smallcaps">MISR</span> <span class="smallcaps">Path</span> and <span class="smallcaps">Block</span>, at the requested spatial resolution.</p></li>
</ul></li>
<li><p><strong>Keyword parameters [Input/Output]:</strong></p>
<ul>
<li><p><code>AGP_FOLDER = agp_folder {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The directory address of the folder containing the <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> files, if they are not located in the default location.</p></li>
<li><p><code>AGP_VERSION = agp_version {STRING} [I] (Default value:</code> Set by function<br />
<code>set_roots_vers.pro):</code> The <span class="smallcaps">AGP</span> version identifier to use instead of the default value.</p></li>
<li><p><code>DEBUG = debug {INT} [I] (Default value: 0):</code> Flag to activate (<code>1</code>) or skip (<code>0</code>) debugging tests.</p></li>
<li><p><code>EXCPT_COND = excpt_cond {STRING} [O] (Default value: &#8221;):</code> Description of the exception condition if one has been encountered, or a null string otherwise.</p></li>
</ul></li>
<li><p><strong>Returned value type:</strong> <code>INT</code>.</p></li>
<li><p><strong>Outcome:</strong></p>
<ul>
<li><p>If no exception condition has been detected, this function returns <code>0</code>, and the output keyword parameter <code>excpt_cond</code> is set to a null string, if the optional input keyword parameter <code>DEBUG</code> is set and if the optional output keyword parameter <code>EXCPT_COND</code> is provided in the call. The output positional parameters <code>water_mask</code> and <code>land_mask</code> contain the desired masks.</p></li>
<li><p>If an exception condition has been detected, this function returns a non-zero error code, and the output keyword parameter <code>excpt_cond</code> contains a message about the exception condition encountered, if the optional input keyword parameter <code>DEBUG</code> is set and if the optional output keyword parameter <code>EXCPT_COND</code> is provided. The output positional parameters <code>water_mask</code> and <code>land_mask</code> may be inexistent, incomplete or incorrect.</p></li>
</ul></li>
<li><p><strong>Exception conditions:</strong></p>
<ul>
<li><p>Error 100: One or more positional parameter(s) are missing.</p></li>
<li><p>Error 110: Input positional parameter <code>misr_path</code> is invalid.</p></li>
<li><p>Error 120: Input positional parameter <code>misr_block</code> is invalid.</p></li>
<li><p>Error 130: Input positional parameter <code>misr_resol</code> is invalid.</p></li>
<li><p>Error 200: An exception condition occurred in <code>mk_agp_lc_masks.pro</code>.</p></li>
</ul></li>
<li><p><strong>Dependencies:</strong></p>
<ul>
<li><p><code>chk_misr_block.pro</code></p></li>
<li><p><code>chk_misr_path.pro</code></p></li>
<li><p><code>chk_misr_resol.pro</code></p></li>
<li><p><code>mk_agp_lc_masks.pro</code></p></li>
<li><p><code>strstr.pro</code></p></li>
</ul></li>
<li><p><strong>Remarks:</strong></p>
<ul>
<li><p><strong>Note 1:</strong> The water and land masks generated by this function are based on static information on the spatial distribution of surface geophysical types: they are valid for all cameras and throughout the <span class="smallcaps">MISR</span> mission.</p></li>
<li><p><strong>Note 2:</strong> Although the underlying <span class="smallcaps">MISR</span> <span class="smallcaps">AGP</span> data distinguishes between various types of geophysical media, this is not meant to be an accurate land cover map, let alone a source of information on land cover change.</p></li>
<li><p><strong>Note 3:</strong> The landcover information contained in the AGP files is provided at the spatial resolution of 1100 m. If the input positional parameter <code>misr_resol</code> is set to <code>275</code>, then the original values are simply duplicated with the <span class="smallcaps">MISR-HR</span> function <code>lr2hr.pro</code> to artificially generate the higher resolution map: no aditional or more detailed information is provided.</p></li>
</ul></li>
<li><p><strong>Examples:</strong></p>
<pre><code>IDL&gt; misr_path = 168
IDL&gt; misr_block = 110
IDL&gt; misr_resol = 275
IDL&gt; rc = mk_water_land_masks(misr_path, misr_block, $
   misr_resol, water_mask, land_mask, $
   AGP_FOLDER = agp_folder, AGP_VERSION = agp_version, $
   DEBUG = debug, EXCPT_COND = excpt_cond)
IDL&gt; PRINT, &#39;rc = &#39; + strstr(rc) + &#39;, excpt_cond = &gt;&#39; + excpt_cond + &#39;&lt;&#39;
rc = 0, excpt_cond = &gt;&lt;</code></pre></li>
<li><p><strong>References:</strong></p>
<ul>
<li><p>Mike Bull, Jason Matthews, Duncan McDonald, Alexander Menzies, Catherine Moroney, Kevin Mueller, Susan Paradise, Mike Smyth (2011) <em>MISR Data Products Specifications</em>, <strong>JPL D-13963</strong>, <strong>Revision S</strong>, Section 9.4, p. 210, Jet Propulsion Laboratory, California Institute of Technology, Pasadena, CA, USA.</p></li>
</ul></li>
<li><p><strong>Versioning:</strong></p>
<ul>
<li><p>2018&#8211;08&#8211;03: Version 0.9 &#8212; Initial release under the name<br />
<code>make_water_land_masks.pro</code>.</p></li>
<li><p>2018&#8211;08&#8211;08: Version 1.0 &#8212; Initial public release.</p></li>
<li><p>2018&#8211;12&#8211;17: Version 1.2 &#8212; Update the code to rename the input positional parameter <code>resol</code> to <code>misr_resol</code>, include additional keyword parameters, use the new function <code>make_agp_lc_masks.pro</code> instead of <code>make_agp_masks.pro</code>, and update the documentation.</p></li>
<li><p>2019&#8211;01&#8211;08: Version 1.3 &#8212; Rename the function from <code>make_water_land_masks.pro</code> to <code>mk_water_land_masks.pro</code>, and update the documentation.</p></li>
<li><p>2019&#8211;01&#8211;28: Version 2.00 &#8212; Systematic update of all routines to implement stricter coding standards and improve documentation.</p></li>
<li><p>2019&#8211;02&#8211;24: Version 2.01 &#8212; Documentation update.</p></li>
</ul></li>
</ul>
</body>
</html>
